!function(y){function T(){var e;y.fn.ajaxSubmit.debug&&(e="[jquery.form] "+Array.prototype.join.call(arguments,""),window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e))}y.fn.ajaxSubmit=function(b){if(!this.length)return T("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof b&&(b={success:b});var e=this.attr("action"),t="string"==typeof e?y.trim(e):"";t=(t=t&&(t.match(/^([^#]+)/)||[])[1])||window.location.href||"",b=y.extend(!0,{url:t,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);e={};if(this.trigger("form-pre-serialize",[this,b,e]),e.veto)return T("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return T("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var r,a,n=this.formToArray(b.semantic);if(b.data)for(r in b.extraData=b.data,b.data)if(b.data[r]instanceof Array)for(var i in b.data[r])n.push({name:r,value:b.data[r][i]});else a=b.data[r],a=y.isFunction(a)?a():a,n.push({name:r,value:a});if(b.beforeSubmit&&!1===b.beforeSubmit(n,this,b))return T("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[n,this,b,e]),e.veto)return T("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;t=y.param(n);"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+t,b.data=null):b.data=t;var o,x=this,s=[];b.resetForm&&s.push(function(){x.resetForm()}),b.clearForm&&s.push(function(){x.clearForm()}),!b.dataType&&b.target?(o=b.success||function(){},s.push(function(e){var t=b.replaceTarget?"replaceWith":"html";y(b.target)[t](e).each(o,arguments)})):b.success&&s.push(b.success),b.success=function(e,t,r){for(var a=b.context||b,n=0,i=s.length;n<i;n++)s[n].apply(a,[e,t,r||x,x])};e=0<y("input:file",this).length,t="multipart/form-data",t=x.attr("enctype")==t||x.attr("encoding")==t;return!1!==b.iframe&&(e||b.iframe||t)?b.closeKeepAlive?y.get(b.closeKeepAlive,l):l():y.ajax(b),this.trigger("form-submit-notify",[this,b]),this;function l(){var n,i,o,s,l,u,c,e,t,f,m,d,p,h,v=x[0];function r(){var e=x.attr("target"),t=x.attr("action");v.setAttribute("target",i),"POST"!=v.getAttribute("method")&&v.setAttribute("method","POST"),v.getAttribute("action")!=n.url&&v.setAttribute("action",n.url),n.skipEncodingOverride||x.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),n.timeout&&setTimeout(function(){c=!0,g()},n.timeout);var r=[];try{if(n.extraData)for(var a in n.extraData)r.push(y('<input type="hidden" name="'+a+'" value="'+n.extraData[a]+'" />').appendTo(v)[0]);o.appendTo("body"),s.attachEvent?s.attachEvent("onload",g):s.addEventListener("load",g,!1),v.submit()}finally{v.setAttribute("action",t),e?v.setAttribute("target",e):x.removeAttr("target"),y(r).remove()}}function g(){if(!l.aborted){var e=s.contentWindow?s.contentWindow.document:s.contentDocument||s.document;if(e&&e.location.href!=n.iframeSrc){s.detachEvent?s.detachEvent("onload",g):s.removeEventListener("load",g,!1);var t=!0;try{if(c)throw"timeout";var r="xml"==n.dataType||e.XMLDocument||y.isXMLDoc(e);if(T("isXml="+r),!r&&window.opera&&(null==e.body||""==e.body.innerHTML)&&--m)return T("requeing onLoad callback, DOM not available"),void setTimeout(g,250);l.responseText=e.body?e.body.innerHTML:e.documentElement?e.documentElement.innerHTML:null,l.responseXML=e.XMLDocument||e,l.getResponseHeader=function(e){return{"content-type":n.dataType}[e]};var a=/(json|script)/.test(n.dataType);a||n.textarea?(r=e.getElementsByTagName("textarea")[0])?l.responseText=r.value:a&&(r=e.getElementsByTagName("pre")[0],a=e.getElementsByTagName("body")[0],r?l.responseText=r.textContent:a&&(l.responseText=a.innerHTML)):"xml"!=n.dataType||l.responseXML||null==l.responseText||(l.responseXML=d(l.responseText)),f=h(l,n.dataType,n)}catch(e){T("error caught:",e),t=!1,l.error=e,n.error&&n.error.call(n.context,l,"error",e),u&&y.event.trigger("ajaxError",[l,n,e])}l.aborted&&(T("upload aborted"),t=!1),t&&(n.success&&n.success.call(n.context,f,"success",l),u&&y.event.trigger("ajaxSuccess",[l,n])),u&&y.event.trigger("ajaxComplete",[l,n]),u&&!--y.active&&y.event.trigger("ajaxStop"),n.complete&&n.complete.call(n.context,l,t?"success":"error"),setTimeout(function(){o.removeData("form-plugin-onload"),o.remove(),l.responseXML=null},100)}}}y(":input[name=submit],:input[id=submit]",v).length?alert('Error: Form elements must not have name or id of "submit".'):((n=y.extend(!0,{},y.ajaxSettings,b)).context=n.context||n,i="jqFormIO"+(new Date).getTime(),o=y('<iframe id="'+i+'" name="'+i+'" src="'+n.iframeSrc+'" />'),s=o[0],o.css({position:"absolute",top:"-1000px",left:"-1000px"}),l={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){T("aborting upload...");var e="aborted";this.aborted=1,o.attr("src",n.iframeSrc),l.error=e,n.error&&n.error.call(n.context,l,"error",e),u&&y.event.trigger("ajaxError",[l,n,e]),n.complete&&n.complete.call(n.context,l,"error")}},(u=n.global)&&!y.active++&&y.event.trigger("ajaxStart"),u&&y.event.trigger("ajaxSend",[l,n]),n.beforeSend&&!1===n.beforeSend.call(n.context,l,n)?n.global&&y.active--:l.aborted||(c=0,!(e=v.clk)||(t=e.name)&&!e.disabled&&(n.extraData=n.extraData||{},n.extraData[t]=e.value,"image"==e.type&&(n.extraData[t+".x"]=v.clk_x,n.extraData[t+".y"]=v.clk_y)),n.forceSync?r():setTimeout(r,10),m=50,d=y.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},p=y.parseJSON||function(e){return window.eval("("+e+")")},h=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n="xml"===t||!t&&0<=a.indexOf("xml"),e=n?e.responseXML:e.responseText;return n&&"parsererror"===e.documentElement.nodeName&&y.error&&y.error("parsererror"),r&&r.dataFilter&&(e=r.dataFilter(e,t)),"string"==typeof e&&("json"===t||!t&&0<=a.indexOf("json")?e=p(e):("script"===t||!t&&0<=a.indexOf("javascript"))&&y.globalEval(e)),e}))}},y.fn.ajaxForm=function(t){if(0!==this.length)return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.isDefaultPrevented()||(e.preventDefault(),y(this).ajaxSubmit(t))}).bind("click.form-plugin",function(e){var t=e.target,r=y(t);if(!r.is(":submit,input:image")){var a=r.closest(":submit");if(0==a.length)return;t=a[0]}var n=this;"image"==(n.clk=t).type&&(null!=e.offsetX?(n.clk_x=e.offsetX,n.clk_y=e.offsetY):"function"==typeof y.fn.offset?(r=r.offset(),n.clk_x=e.pageX-r.left,n.clk_y=e.pageY-r.top):(n.clk_x=e.pageX-t.offsetLeft,n.clk_y=e.pageY-t.offsetTop)),setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)});var e={s:this.selector,c:this.context};return!y.isReady&&e.s?(T("DOM not ready, queuing ajaxForm"),y(function(){y(e.s,e.c).ajaxForm(t)})):T("terminating; zero elements found by selector"+(y.isReady?"":" (DOM not ready)")),this},y.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},y.fn.formToArray=function(e){var t=[];if(0===this.length)return t;var r,a,n,i,o,s,l,u,c,f=this[0],m=e?f.getElementsByTagName("*"):f.elements;if(!m)return t;for(r=0,o=m.length;r<o;r++)if(c=(i=m[r]).name)if(e&&f.clk&&"image"==i.type)i.disabled||f.clk!=i||(t.push({name:c,value:y(i).val()}),t.push({name:c+".x",value:f.clk_x},{name:c+".y",value:f.clk_y}));else if((n=y.fieldValue(i,!0))&&n.constructor==Array)for(a=0,s=n.length;a<s;a++)t.push({name:c,value:n[a]});else null!=n&&t.push({name:c,value:n});return e||!f.clk||(c=(u=(l=y(f.clk))[0]).name)&&!u.disabled&&"image"==u.type&&(t.push({name:c,value:l.val()}),t.push({name:c+".x",value:f.clk_x},{name:c+".y",value:f.clk_y})),t},y.fn.formSerialize=function(e){return y.param(this.formToArray(e))},y.fn.fieldSerialize=function(n){var i=[];return this.each(function(){var e=this.name;if(e){var t=y.fieldValue(this,n);if(t&&t.constructor==Array)for(var r=0,a=t.length;r<a;r++)i.push({name:e,value:t[r]});else null!=t&&i.push({name:this.name,value:t})}}),y.param(i)},y.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r<a;r++){var n=this[r],n=y.fieldValue(n,e);null==n||n.constructor==Array&&!n.length||(n.constructor==Array?y.merge(t,n):t.push(n))}return t},y.fieldValue=function(e,t){var r=e.name,a=e.type,n=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==n&&-1==e.selectedIndex))return null;if("select"!=n)return y(e).val();n=e.selectedIndex;if(n<0)return null;for(var i=[],o=e.options,s="select-one"==a,l=s?n+1:o.length,u=s?n:0;u<l;u++){var c=o[u];if(c.selected){var f=(f=c.value)||(c.attributes&&c.attributes.value&&!c.attributes.value.specified?c.text:c.value);if(s)return f;i.push(f)}}return i},y.fn.clearForm=function(){return this.each(function(){y("input,select,textarea",this).clearFields()})},y.fn.clearFields=y.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},y.fn.resetForm=function(){return this.each(function(){"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset()})},y.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},y.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var e=this.type;"checkbox"==e||"radio"==e?this.checked=t:"option"==this.tagName.toLowerCase()&&(e=y(this).parent("select"),t&&e[0]&&"select-one"==e[0].type&&e.find("option").selected(!1),this.selected=t)})}}(jQuery);